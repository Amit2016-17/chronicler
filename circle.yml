machine:
  environment:
      SCALA_VERSION: 2.12.0
      SCALA_BINARY_VERSION: 2.12
  java:
      version: oraclejdk8
  services:
    - docker
dependencies:
  pre:
    - wget -q https://dl.bintray.com/sbt/debian/sbt-0.13.15.deb
    - sudo dpkg -i sbt-0.13.15.deb
  cache_directories:
    - "~/.ivy2"
    - "~/.sbt"
  override:
      - sbt ++$SCALA_VERSION coverage test:compile
  test:
    override:
      - sbt ++$SCALA_VERSION coverage test coverageReport
    post:
      - mv target/scala-$SCALA_BINARY_VERSION/coverage-report  $CIRCLE_ARTIFACTS/coverage-report
      - mv target/scala-$SCALA_BINARY_VERSION/scoverage-report $CIRCLE_ARTIFACTS/scoverage-report
